var Jt=Object.defineProperty,en=Object.defineProperties;var tn=Object.getOwnPropertyDescriptors;var At=Object.getOwnPropertySymbols;var nn=Object.prototype.hasOwnProperty,sn=Object.prototype.propertyIsEnumerable;var ct=(t,e,n)=>e in t?Jt(t,e,{enumerable:!0,configurable:!0,writable:!0,value:n}):t[e]=n,dt=(t,e)=>{for(var n in e||(e={}))nn.call(e,n)&&ct(t,n,e[n]);if(At)for(var n of At(e))sn.call(e,n)&&ct(t,n,e[n]);return t},ht=(t,e)=>en(t,tn(e));var v=(t,e,n)=>(ct(t,typeof e!="symbol"?e+"":e,n),n);import{d as ie,r as E,_ as ce,o as h,c as f,F as D,a as Q,n as q,t as I,b as Vt,e as fe,f as Re,g as De,h as u,i as te,j as $t,k as U,l as Ye,m as on,w as Z,v as ae,u as w,p as be,q as an,s as Ae,x as $e,y as Je,z as ln,A as rn,B as et,C as un,D as he,E as ge,G as we,H as It,I as ye,J as cn,K as dn}from"./index.6280f091.js";class Pt{constructor(e,n){v(this,"symbol");v(this,"value");v(this,"children");this.symbol=e,typeof n=="string"?(this.value=n,this.children=[]):(this.value="",this.children=n)}toString(){return this.pretty(0)}pretty(e){let s=" ".repeat(e*2)+this.symbol.name;return this.symbol.isTerm&&(s+="("+this.value+")"),s+=`
`,this.children.forEach(o=>{s+=o.pretty(e+1)}),s}}class ee extends Error{constructor(n,s){super(n.toString());v(this,"extra");this.extra=s}}class Be extends Error{constructor(n,s){super(n.toString());v(this,"extra");this.extra=s}}const X={FATAL_ERROR:1e3,INVALID_OPERATION:1001,DESERIALIZE_FAILED:1002,LR_ITEM_INDEX_OUT_OF_RANGE:1011,AUTOMATON_STATES_NOT_FOUND:1031,START_SYMBOL_NOT_FOUND:1051,UNEXPECTED_TOKEN:1052,TOKEN_LIST_INDEX_OUT_OF_RANGE:1053,LR_ITEM_SET_CLOSURE_HAVE_CALCULATED:2021,AUTOMATON_STATE_CLOSURE_NEED_CALCULATE:2031,AUTOMATON_STATE_CLOSURE_HAVE_APPENDED:2032,LOOKAHEADS_HAVE_PROPAGATED:2033,NEED_SPONTANEOUSLY_GENERATE:2034,PARSE_TABLE_HAVE_CALCULATED:2041,PARSE_TABLE_NEED_CALCULATE:2051,PARSER_DONE:2052};class Ve{constructor(e){v(this,"name");v(this,"isTerm",!1);this.name=e}static deserialize(e){let n=e.__type__;if(n===Ge._type)return new Ge(e.name);if(n===St._type)return new St(e.name);throw new ee(X.DESERIALIZE_FAILED)}eq(e){return this.isTerm===e.isTerm&&this.name===e.name}}class Ge extends Ve{constructor(n){super(n);v(this,"isTerm",!0)}}v(Ge,"_type","Terminal");class St extends Ve{constructor(n){super(n);v(this,"isTerm",!1)}}v(St,"_type","NonTerminal");const hn="start",Fe=new Ge(hn),fn="$",Pe=new Ge(fn),pn="$EPSILON",Wt=new Ge(pn),mn="#",Lt=new Ge(mn),it=class{constructor(e,n,s,o){v(this,"origin");v(this,"expansion");v(this,"order");v(this,"priority");this.origin=e,this.expansion=n,this.order=s,this.priority=o}static deserialize(e){if(e.__type__!==it._type)throw new ee(X.DESERIALIZE_FAILED);return new it(Ve.deserialize(e.origin),e.expansion.map(s=>Ve.deserialize(s)),e.order,e.options.priority?e.options.priority:0)}toString(){let e="";e+=this.origin.name+" \u2192 ";for(let n=0;n<this.expansion.length;n++)n===0?e+=this.expansion[n].name:e+=" "+this.expansion[n].name;return e}};let at=it;v(at,"_type","Rule");const lt=class{constructor(e,n,s,o,r,l,i,a){v(this,"type");v(this,"symbol");v(this,"value");v(this,"startPos");v(this,"line");v(this,"column");v(this,"endLine");v(this,"endColumn");v(this,"endPos");this.type=e,this.symbol=Lt,this.value=n,this.startPos=s,this.line=o,this.column=r,this.endLine=l,this.endColumn=i,this.endPos=a}static deserialize(e){if(e.__type__!==lt._type)throw new ee(X.DESERIALIZE_FAILED);return new lt(e.type,e.value,e.start_pos,e.line,e.column,e.end_line,e.end_column,e.end_pos)}};let Ue=lt;v(Ue,"_type","Token");const st={DOT:".",COMMA:",",COLON:":",SEMICOLON:";",PLUS:"+",MINUS:"-",STAR:"*",SLASH:"/",BACKSLASH:"\\",VBAR:"|",QMARK:"?",BANG:"!",AT:"@",HASH:"#",DOLLAR:"$",PERCENT:"%",CIRCUMFLEX:"^",AMPERSAND:"&",UNDERSCORE:"_",LESSTHAN:"<",MORETHAN:">",EQUAL:"=",DBLQUOTE:'"',QUOTE:"'",BACKQUOTE:"`",TILDE:"~",LPAR:"(",RPAR:")",LBRACE:"{",RBRACE:"}",LSQB:"[",RSQB:"]"};class We{constructor(e,n=0,s){v(this,"rule");v(this,"index");v(this,"lookahead");if(n>e.expansion.length)throw new ee(X.LR_ITEM_INDEX_OUT_OF_RANGE);this.rule=e,this.index=n,s===void 0?this.lookahead=new Set:s instanceof Ve?(this.lookahead=new Set,this.lookahead.add(s)):this.lookahead=new Set([...s])}toString(){let e="[ "+this.rule.origin.name+" ->";for(let n=0;n<this.rule.expansion.length;n++)e+=" ",n===this.index&&(e+="\xB7"),e+=this.rule.expansion[n].name;if(this.lookahead.size===0)return e+(this.end()?"\xB7":"")+" ]";{e+=this.end()?"\xB7, ":", ";let n=!0;return this.lookahead.forEach(s=>{n?n=!1:e+="/",e+=s.name}),e+" ]"}}equal(e){return e.lookahead.size!==this.lookahead.size?!1:this.equalIncludes(e)}equalIncludes(e){for(let n of e.lookahead)if(!this.lookahead.has(n))return!1;return e.rule===this.rule&&e.index===this.index}equalLR0(e){return e.rule===this.rule&&e.index===this.index}end(){return this.index===this.rule.expansion.length}current(){return this.rule.expansion[this.index]}advance(){return new We(this.rule,this.index+1,this.lookahead)}appendLookahead(e){let n=this.lookahead.size;return e instanceof Ve?this.lookahead.add(e):this.lookahead=new Set([...this.lookahead,...e]),this.lookahead.size!==n}clearLookahead(){this.lookahead.clear()}}class ft{constructor(e,n){v(this,"kernel");v(this,"closure");v(this,"id",0);v(this,"closureDone",!1);v(this,"accepting",!1);v(this,"end",!1);v(this,"appended",!1);v(this,"searchIndex",0);this.kernel=e,this.id=n,this.closure=[],this.kernel.forEach(s=>{this.closure.push(s),s.current()||(this.accepting=!0,s.rule.origin===Fe&&(this.end=!0))})}toString(){let e="ItemSet "+this.id.toString()+`: 
`;return this.closureDone?this.closure.forEach(n=>{e+=n.toString()+`
`}):e+="Closure not calculated.",e+="------------",e}initClosure(){this.closure=[],this.closureDone=!1,this.searchIndex=0,this.kernel.forEach(e=>{this.closure.push(e)})}equal(e){return this.kernelEqual(e.kernel)}kernelEqual(e){if(this.kernel.length!==e.length)return!1;for(let n=0;n<e.length;n++)if(!this.inKernel(e[n]))return!1;return!0}inKernel(e){for(let n=0;n<this.kernel.length;n++)if(e.equal(this.kernel[n]))return!0;return!1}calcClosure(e){if(this.closureDone)throw new Be(X.LR_ITEM_SET_CLOSURE_HAVE_CALCULATED);let n=[];for(;!this.closureDone;){let s=[],o=this.closure[this.searchIndex];const r=o.current();for(let l of R.rules)if(r===l.origin){if(e==="LR0"){let i=new We(l,0);this.have(i)||(s.push(i),this.closure.push(i))}else if(e==="LR1"){let i=o.rule.expansion.slice(o.index+1);o.lookahead.forEach(a=>{yn([...i,a]).forEach(y=>{let m=new We(l,0,y);this.have(m)||(s.push(m),this.closure.push(m))})})}}this.searchIndex++,this.searchIndex===this.closure.length&&(this.closureDone=!0),n.push(s)}return n}have(e){for(let n=0;n<this.closure.length;n++)if(this.closure[n].equalIncludes(e))return!0;return!1}lr0kernelEqual(e){if(this.kernel.length!==e.kernel.length)return!1;for(let n=0;n<e.kernel.length;n++){let s=!1;for(let o=0;o<this.kernel.length;o++)if(e.kernel[n].equalLR0(this.kernel[o])){s=!0;break}if(!s)return!1}return!0}mergeLookaheads(){let e=[];for(let n=this.kernel.length;n<this.closure.length;n++){let s=!1;for(let o=0;o<e.length;o++)if(e[o].rule===this.closure[n].rule&&e[o].index===this.closure[n].index){s=!0,e[o].lookahead=new Set([...e[o].lookahead,...this.closure[n].lookahead]);break}s||e.push(this.closure[n])}this.closure=[...this.kernel,...e]}mergeLr1ItemSet(e){e.closure.forEach(n=>{for(let s=0;s<this.closure.length;s++)this.closure[s].equalLR0(n)&&(this.closure[s].lookahead=new Set([...this.closure[s].lookahead,...n.lookahead]))})}getItemIndex(e){for(let n=0;n<this.kernel.length;n++)if(this.kernel[n].equal(e))return n;return-1}}class gn{constructor(e){v(this,"states",[]);v(this,"done",!1);v(this,"type");v(this,"transitions",new Map);v(this,"transitionsRule",new Map);v(this,"effects",[]);v(this,"propagated",!1);v(this,"spontaneouslyGenerated",!1);this.type=e;let n=new ft([new We(R.startRule,0,this.type==="LR0"||this.type==="LR0_LALR1"?void 0:Pe)],0);this.states.push(n)}toString(){let e="";return this.states.forEach(n=>{n!==void 0&&(e+=n.toString()+`
`)}),e}CalcStateClosure(e,n){if(this.states[e]===void 0)throw new ee(X.AUTOMATON_STATES_NOT_FOUND);return n==="LR0"||n==="LR0_LALR1"?this.states[e].calcClosure("LR0"):this.states[e].calcClosure("LR1"),this.states[e]}AppendStates(e){if(this.states[e]===void 0)throw new ee(X.AUTOMATON_STATES_NOT_FOUND);let n=this.states[e];if(!n.closureDone){let a=!1;for(let c=0;c<n.kernel.length;c++){let y=n.kernel[c].current();y===void 0||y.isTerm||(a=!0)}if(a)throw new Be(X.AUTOMATON_STATE_CLOSURE_NEED_CALCULATE);n.closureDone=!0}if(n.appended)throw new Be(X.AUTOMATON_STATE_CLOSURE_HAVE_APPENDED);n.appended=!0;let s=new Map,o=new Map;n.closure.forEach(a=>{if(!a.end()){let c=a.current();s.has(c)||s.set(c,[]),s.get(c).push(a.advance());let y=o.get(c);(y===void 0||a.rule.priority>y.priority||a.rule.priority===y.priority&&a.rule.order>y.order)&&o.set(c,a.rule)}}),this.transitionsRule.set(e,o);let r=this.states.length,l=new Map,i=[];return s.forEach((a,c)=>{let y=-1;for(let m=0;m<r;m++)if(this.states[m].kernelEqual(a)){y=m;break}if(y===-1){y=this.states.length;let m=new ft(a,y),L=!1,x=!1;for(let z=0;z<m.kernel.length;z++){let N=m.kernel[z].current();N!==void 0&&(x=!0,N.isTerm||(L=!0))}m.closureDone=!L,m.appended=!x,this.states.push(m)}l.set(c,y),i.push({symbol:c,state:this.states[y]})}),this.transitions.set(e,l),{from:e,targets:i}}MergeLookaheads(e){if(this.states[e]===void 0)throw new ee(X.AUTOMATON_STATES_NOT_FOUND);return this.states[e].mergeLookaheads(),this.states[e]}mergeLr1(){if(this.type!=="LR1_LALR1")throw new ee(X.INVALID_OPERATION);let e=new Map;for(let s=0;s<this.states.length;s++)if(this.states[s]!==void 0)for(let o=s+1;o<this.states.length;o++)this.states[o]!==void 0&&this.states[s].lr0kernelEqual(this.states[o])&&(e.set(this.states[o].id,this.states[s].id),this.states[s].mergeLr1ItemSet(this.states[o]),this.transitions.delete(this.states[o].id),delete this.states[o]);const n=new Map;return this.states.forEach(s=>{let o=this.transitions.get(s.id);if(o===void 0)return;let r=o.entries(),l=[];for(let i of r){let a=e.get(i[1]);a!==void 0&&(o.set(i[0],a),l.push({symbol:i[0],from:i[1],to:a}))}l.length!==0&&n.set(s.id,l)}),{mergeMap:e,transitionChanges:n}}propagatedAndSpontaneouslyGenerate(){if(this.type!=="LR0_LALR1")throw new ee(X.INVALID_OPERATION);let e=new Map;return e.set(0,new Map().set(0,new Set([Pe]))),this.states.forEach(n=>{let s=[];n.kernel.forEach(o=>{if(o.end()){s.push([]);return}let r=[],l=new ft([new We(o.rule,o.index,Lt)],-1);l.calcClosure("LR1"),l.closure.forEach(i=>{if(i.end())return;let a=Array.from(i.lookahead)[0],y=this.transitions.get(n.id).get(i.current());if(y===void 0)throw new ee(X.FATAL_ERROR);let m=i.advance();m.clearLookahead();let L=this.states[y].getItemIndex(m);if(L===-1)throw new ee(X.FATAL_ERROR);if(a===Lt)r.push([y,L]);else{e.has(y)||e.set(y,new Map);let x=e.get(y);x.has(L)||x.set(L,new Set),x.get(L).add(a)}}),s.push(r)}),this.effects.push(s)}),e.forEach((n,s)=>{n.forEach((o,r)=>{this.states[s].kernel[r].appendLookahead(o)})}),e}pass(){if(this.type!=="LR0_LALR1")throw new ee(X.INVALID_OPERATION);if(this.propagated)throw new ee(X.LOOKAHEADS_HAVE_PROPAGATED);if(!this.spontaneouslyGenerated)throw new ee(X.NEED_SPONTANEOUSLY_GENERATE);let e=!1;this.states.forEach(n=>n.kernel.forEach((s,o)=>{this.effects[n.id][o].forEach(l=>{let i=this.states[l[0]].kernel[l[1]].appendLookahead(s.lookahead);e=e||i})})),e||(this.propagated=!0)}reCalc(){if(this.type!=="LR0_LALR1")throw new ee(X.INVALID_OPERATION);this.states.forEach(e=>{e.initClosure(),e.calcClosure("LR1"),e.mergeLookaheads()})}}class rt{constructor(e,n,s,o){v(this,"name");v(this,"abbr");v(this,"arg");v(this,"rule");this.name=e,this.abbr=n,this.arg=s,this.rule=o}toString(){return this.abbr+(this.name==="Accept"?"":this.arg.toString())}}class pt extends rt{constructor(e,n){super("Shift","s",e,n)}}class xt extends rt{constructor(e,n){super("Reduce","r",e,n)}}class mt extends rt{constructor(e,n){super("Goto","g",e,n)}}class _n extends rt{constructor(){super("Accept","acc",-1,R.startRule)}}class vn{constructor(e){v(this,"actionTable",new Map);v(this,"gotoTable",new Map);v(this,"actionHeader",[]);v(this,"gotoHeader",[]);v(this,"conflict",!1);v(this,"done",!1);v(this,"automaton");this.automaton=e}toString(){let e=[],n=[],s=[];R.symbolMap.forEach((y,m)=>{y!==Fe&&(y.isTerm?n.push(m):s.push(m))});let o=[...n,...s];this.automaton.states.forEach((y,m)=>{let L=[m.toString()];o.forEach(x=>{let z=R.symbolMap.get(x),N=z.isTerm?this.actionTable.get(y.id).get(z):this.gotoTable.get(y.id).get(z);L.push(N?N.toString():"")}),e.push(L)}),o=["",...o],e=[o,...e];let r=[];for(let y=0;y<e[0].length;++y){let m=0;e.forEach(L=>{m=Math.max(m,L[y].length)}),r.push(m)}let l=n.length-1,i=s.length-1;for(let y=0;y<n.length;y++)l+=r[y+1];for(let y=0;y<s.length;y++)i+=r[y+n.length+1];l=Math.max(l,6),i=Math.max(i,4);let a=r[0]+l+i+2,c="";return c+="-".repeat(a+2)+`
`,c+="|"+" ".repeat(r[0])+"|ACTION"+" ".repeat(l-6)+"|GOTO"+" ".repeat(i-4)+`|
`,e.forEach(y=>{c+="-".repeat(a+2)+`
|`,y.forEach((m,L)=>{c+=m+" ".repeat(r[L]-m.length)+"|"}),c+=`
`}),c+="-".repeat(a+2),c}insert(e,n,s,o){let r=e.get(n).get(s);r===void 0?e.get(n).set(s,[o]):(this.conflict=!0,r.push(o),r.sort((l,i)=>{if(l instanceof mt||i instanceof mt)throw new ee(X.FATAL_ERROR);return l.rule.priority===i.rule.priority?l.rule.origin===i.rule.origin&&i.rule.order!==l.rule.order?i.rule.order-l.rule.order:l instanceof pt?-1:i instanceof pt?1:0:i.rule.priority-l.rule.priority}))}calc(){if(this.done)throw new Be(X.PARSE_TABLE_HAVE_CALCULATED);R.symbolMap.forEach(e=>{e!==Fe&&(e.isTerm?this.actionHeader.push(e):this.gotoHeader.push(e))}),this.actionTable=new Map,this.gotoTable=new Map,this.automaton.states.forEach(e=>{this.actionTable.set(e.id,new Map),this.gotoTable.set(e.id,new Map);let n=e.id,s=this.automaton.transitions.get(n);s==null||s.forEach((o,r)=>{let l=this.automaton.transitionsRule.get(n).get(r);if(l===void 0)throw new ee(X.FATAL_ERROR);r.isTerm?this.insert(this.actionTable,n,r,new pt(o,l)):this.insert(this.gotoTable,n,r,new mt(o,l))}),e.closure.forEach(o=>{o.end()&&(o.rule.origin===Fe?this.insert(this.actionTable,n,Pe,new _n):this.automaton.type==="LR0"?R.symbolMap.forEach(r=>{this.insert(this.actionTable,n,r,new xt(R.ruleIndexMap.get(o.rule),o.rule))}):o.lookahead.forEach(r=>{this.insert(this.actionTable,n,r,new xt(R.ruleIndexMap.get(o.rule),o.rule))}))})}),this.done=!0}get(e,n,s){let r=(e==="ACTION"?this.actionTable:this.gotoTable).get(n).get(s);return r===void 0?r:r[0]}}const R={rules:[],startRule:void 0,ruleIndexMap:new Map,symbolMap:new Map,tokens:[],firstSet:new Map,nullable:new Set,stateStack:[],valueStack:[],reset:function(){this.rules=[],this.startRule=void 0,this.ruleIndexMap=new Map,this.symbolMap=new Map,this.tokens=[],this.firstSet=new Map,this.nullable=new Set,this.stateStack=[],this.valueStack=[]}};function Ct(t,e){if(e.size>t.size)return!1;let n=e.values();for(let s of n)if(!t.has(s))return!1;return!0}function yn(t){let e=new Set;for(let n=0;n<t.length;++n){if(t[n].isTerm){e=new Set([...e,t[n]]);break}if(e=new Set([...e,...R.firstSet.get(t[n])]),!R.nullable.has(t[n]))break;n===t.length-1&&e.add(Wt)}return Array.from(e)}class wn{constructor(e,n,s,o){v(this,"algo");v(this,"automaton");v(this,"current");v(this,"parseTable");v(this,"tokenPtr",-1);v(this,"done",!1);v(this,"store",R);R.reset(),this.algo=e,o||(n.forEach(i=>{i.expansion.forEach(a=>{st[a.name]!==void 0&&(a.name=st[a.name])})}),s.forEach(i=>{st[i.type]!==void 0&&(i.type=st[i.type])})),R.rules=n,R.tokens=s;const r=i=>(R.symbolMap.has(i.name)||R.symbolMap.set(i.name,i),R.symbolMap.get(i.name));if(r(Fe),r(Pe),R.rules.forEach((i,a)=>{i.origin.name===Fe.name&&(R.startRule=i),i.origin=r(i.origin),i.expansion.forEach((c,y,m)=>{m[y]=r(c)}),R.ruleIndexMap.set(i,a)}),!R.startRule)throw new ee(X.START_SYMBOL_NOT_FOUND);R.tokens.forEach(i=>{const a=R.symbolMap.get(i.type);if(a===void 0)throw new ee(X.FATAL_ERROR);i.symbol=a});const l=new Ue(Pe.name,Pe.name,0,0,0,0,0,0);l.symbol=Pe,R.tokens.push(l),this.automaton=new gn(this.algo),this.parseTable=new vn(this.automaton),this.algo!=="LR0"&&this.calcFirstSet(),R.stateStack.push(0),this.current=this.nextToken()}calcFirstSet(){let e=!0;R.symbolMap.forEach(n=>{R.firstSet.set(n,n.isTerm?new Set([n]):new Set)});do e=!0,R.rules.forEach(n=>{if(n.expansion.length===0||Ct(R.nullable,new Set([...n.expansion]))){let s=R.nullable.size;R.nullable.add(n.origin),R.nullable.size===s||(e=!1)}for(let s=0;s<n.expansion.length;s++)if(s===0||Ct(R.nullable,new Set(n.expansion.slice(0,s)))){let o=R.firstSet.get(n.origin).size;R.firstSet.set(n.origin,new Set([...R.firstSet.get(n.origin),...R.firstSet.get(n.expansion[s])])),R.firstSet.get(n.origin).size===o||(e=!1)}});while(!e)}getFirstSet(){return{firstSet:R.firstSet,nullable:R.nullable,SYMBOL_EPSILON:Wt}}calcParseTable(){return this.parseTable.calc(),this.parseTable}parseByStep(){if(!this.parseTable.done)throw new Be(X.PARSE_TABLE_NEED_CALCULATE);if(this.done)throw new Be(X.PARSER_DONE);let e=R.stateStack[R.stateStack.length-1],n=this.current.symbol,s,o=this.parseTable.get(n.isTerm?"ACTION":"GOTO",e,n);if(o===void 0)throw new ee(X.UNEXPECTED_TOKEN,this.current.value);if(o.name==="Shift")R.stateStack.push(o.arg),R.valueStack.push(new Pt(n,this.current.value)),this.nextToken(),s={action:o,stateStackDiff:[R.stateStack[R.stateStack.length-1]],valueStackDiff:[R.valueStack[R.valueStack.length-1]]};else if(o.name==="Reduce"){let r=R.rules[o.arg],l=r.expansion.length,i=R.stateStack.splice(-l,l),a=R.valueStack.splice(-l,l);s={action:o,stateStackDiff:i,valueStackDiff:a},this.current=new Pt(r.origin,a)}else o.name==="Goto"?(R.stateStack.push(o.arg),R.valueStack.push(this.current),this.current=R.tokens[this.tokenPtr],s={action:o,stateStackDiff:[R.stateStack[R.stateStack.length-1]],valueStackDiff:[R.valueStack[R.valueStack.length-1]]}):(this.done=!0,s={action:o,stateStackDiff:[],valueStackDiff:[]});return ht(dt({},s),{actionSource:{stateId:e,symbol:n},currentStateId:R.stateStack[R.stateStack.length-1],next:this.current})}nextToken(){if(this.tokenPtr++,this.tokenPtr>=R.tokens.length)throw new ee(X.TOKEN_LIST_INDEX_OUT_OF_RANGE);return this.current=R.tokens[this.tokenPtr],this.current}}function Sn(t){return new Promise(function(e,n){let s=!1,o=document.querySelector('script[src="'+t+'"]');if(!o)o=document.createElement("script"),o.type="text/javascript",o.async=!0,o.src=t,s=!0;else if(o.hasAttribute("data-loaded")){e(o);return}o.addEventListener("error",n),o.addEventListener("abort",n),o.addEventListener("load",function(){o.setAttribute("data-loaded",!0),e(o)}),s&&document.head.appendChild(o)})}class tt extends Error{constructor(n,s){super(n);v(this,"extra");this.extra=s}}let He;async function Ln(t){return await Sn("https://cdn.jsdelivr.net/pyodide/v0.20.0/full/pyodide.js"),He=await window.loadPyodide(),t==null||t.call(this,"Pyodide loaded. Installing micropip..."),await He.loadPackage("micropip"),await He.runPythonAsync("import micropip"),t==null||t.call(this,"Micropip installed."),He}function kn(){if(He===void 0)throw new tt("PyodideNotLoaded");return He}async function bn(t){t("Loading Pyodide...");const e=await Ln(t);if(e===void 0)throw new tt("PyodideLoadFailed");t("Installing Lark..."),await e.runPythonAsync("await micropip.install('lark')"),await e.runPythonAsync("from lark import Lark"),await e.runPythonAsync("import json"),t("Finish loading Lark.")}let kt;function Tn(t,e,n,s){try{const o=kn(),r=[],l=[];o.globals.set("grammar",e),o.globals.set("text",n);let i=`parser = Lark(grammar, parser="lalr", lexer="basic", keep_all_tokens=True)
ruleList = []
for rule in parser.rules:
    ruleList.append(json.dumps(rule.serialize()))
def serialize_token(token):
    d = {"type":token.type,"value":token.value, "start_pos": token.start_pos,
    "line":token.line, "column": token.column, "end_line": token.end_line,
    "end_column":token.end_column, "end_pos": token.end_pos, "__type__": "Token"}
    return json.dumps(d)
tokenGenerator = parser.lex(text)
tokenList = []
for token in tokenGenerator:
    tokenList.append(serialize_token(token))`;o.runPython(i);let a=o.globals.get("ruleList");for(let m=0;m<a.length;m++){let L=at.deserialize(JSON.parse(a.get(m)));r.push(L)}a.destroy();let c=o.globals.get("tokenList");for(let m=0;m<c.length;m++){let L=Ue.deserialize(JSON.parse(c.get(m)));l.push(L)}c.destroy(),i=`del parser
del ruleList
del tokenGenerator
del tokenList`,o.runPython(i),kt=new wn(t,r,l,s)}catch(o){throw new tt("InitParserError",o instanceof Error?o.message:void 0)}}function nt(){if(kt===void 0)throw new tt("ParserNotInited");return kt}const En={options:{type:Array,default:[]},disable:{type:Boolean,default:!1},modelValue:{type:String,default:""}},Rn=ie({name:"GRadioGroup",props:En,setup(t,e){const n=E(0),s=t.options.indexOf(t.modelValue);s!==-1&&(n.value=s);function o(r){n.value=r,e.emit("update:modelValue",t.options[r])}return t.options.length>0&&o(n.value),{activeRadioIndex:n,updateValue:o}}}),An={ref:"radioGroupRef"},$n=["onClick"];function In(t,e,n,s,o,r){return h(),f("div",An,[(h(!0),f(D,null,Q(t.options,(l,i)=>(h(),f("button",{class:q(["g-radio-button",t.disable?"disable":"",i===t.activeRadioIndex?"active":""]),onClick:a=>t.disable?void 0:t.updateValue(i)},I(l),11,$n))),256))],512)}var Pn=ce(Rn,[["render",In],["__scopeId","data-v-0fcadbec"]]);const xn=ie({props:{type:{type:String,default:"default"}},setup(){}});function Cn(t,e,n,s,o,r){return h(),f("button",{class:q(["__g-button","__g-button-type-"+t.type])},[Vt(t.$slots,"default")],2)}var Ee=ce(xn,[["render",Cn]]);const Mn={placeholder:{type:String,default:""},resize:{type:String,default:"none"},modelValue:{type:String,default:""},rows:{type:Number,defalut:10}},On=ie({props:Mn,setup(t,e){E();const n=fe(()=>({resize:t.resize}));function s(o){const r=o.target.value;e.emit("update:modelValue",r)}return{textareaStyle:n,handleTextareaInput:s}}}),zn=["placeholder","rows"];function Nn(t,e,n,s,o,r){return h(),f("textarea",{ref:"textarea",class:"g-textarea",placeholder:t.placeholder,style:Re(t.textareaStyle),rows:t.rows,onInput:e[0]||(e[0]=(...l)=>t.handleTextareaInput&&t.handleTextareaInput(...l))},null,44,zn)}var Dn=ce(On,[["render",Nn],["__scopeId","data-v-19beb715"]]);const Bn={direction:{type:String,required:!0},size:{type:Number,default:16}},Gn=ie({props:Bn,setup(t,e){const n=E(),s=E();return De(()=>{n.value.style.height=s.value.offsetHeight/2+"px"}),fe(()=>({borderWidth:t.size})),{arrow:n,arrowInner:s}}}),Hn={class:"arrow",ref:"arrow"},Fn={class:"arrow-inner",ref:"arrowInner"};function Un(t,e,n,s,o,r){return h(),f("div",Hn,[u("div",Fn,null,512)],512)}var Vn=ce(Gn,[["render",Un],["__scopeId","data-v-91ef504e"]]);const Wn={title:String,content:String,type:{type:String,default:"primary"},verticalOffset:{type:Number,default:60},duration:{type:Number,default:4e3},id:{type:String,required:!0}},Yn=ie({props:Wn,setup(t,e){const n=E(),s=E(!1);let o;function r(){o=window.setTimeout(()=>{s.value=!1},t.duration)}function l(){clearTimeout(o),o=void 0}return De(()=>{var i;(i=n.value)==null||i.addEventListener("transitionend",()=>{s.value===!1&&e.emit("destroy",t.id)}),r(),setTimeout(()=>{s.value=!0},0)}),{active:s,notification:n,startTimer:r,stopTimer:l}}}),Xn=["id"],qn={class:"notification-title"},jn={class:"notification-content"};function Kn(t,e,n,s,o,r){return h(),f("div",{id:t.id,class:q(["g-notification",t.active?"notification-active":""]),ref:"notification",style:Re({top:t.verticalOffset+"px"}),onMouseenter:e[0]||(e[0]=(...l)=>t.stopTimer&&t.stopTimer(...l)),onMouseleave:e[1]||(e[1]=(...l)=>t.startTimer&&t.startTimer(...l))},[u("div",{class:q(["notification-type-"+t.type,"notification-inner"])},[u("div",qn,I(t.title),1),u("div",jn,I(t.content),1)],2)],46,Xn)}var Zn=ce(Yn,[["render",Kn],["__scopeId","data-v-5d64d0db"]]);const Me=[],Mt=16,Qn=60;let Jn=1;function gt(t){let e=Qn;Me.forEach(i=>{var a;e+=(((a=i.el)==null?void 0:a.offsetHeight)||0)+Mt});const n=document.createElement("div");function s(i){var m;let a=Me.findIndex(L=>{var x;return((x=L.component)==null?void 0:x.props.id)===i});if(a===-1)return;let y=((m=Me[a].el)==null?void 0:m.offsetHeight)||0;Me.splice(a,1);for(let L=a;L<Me.length;L++){let x=Number.parseInt(Me[L].el.style.top,10)-y-Mt;Me[L].component.props.verticalOffset=x}$t(null,n)}let o=document.body;const r={title:t.title,content:t.content,type:t.type,verticalOffset:e,id:`g-notification_${Jn++}`,onDestroy:s},l=te(Zn,r);$t(l,n),o.appendChild(n.firstElementChild),Me.push(l)}const es=ie({props:{activeText:{type:String,default:""},inactiveText:{type:String,default:""},modelValue:{type:Boolean},disabled:{type:Boolean,default:!1}},emits:["update:modelValue","change"],setup(t,e){function n(){t.disabled||(e.emit("update:modelValue",!t.modelValue),e.emit("change",t.modelValue))}return{switchChange:n}}}),ts={key:0,class:"__g-switch-text __g-switch-text-l"},ns={key:1,class:"__g-switch-text __g-switch-text-r"};function ss(t,e,n,s,o,r){return h(),f("div",{class:q(["__g-switch",t.disabled?"__g-switch-disabled":""]),onClick:e[0]||(e[0]=l=>t.switchChange())},[t.inactiveText?(h(),f("span",ts,I(t.inactiveText),1)):U("",!0),u("span",{class:q(["__g-switch-core",t.modelValue?"__g-switch-core-active":"__g-switch-core-inactive"])},[u("div",{class:q(["__g-switch-circle",t.modelValue?"__g-switch-circle-active":"__g-switch-circle-inactive"])},null,2)],2),t.activeText?(h(),f("span",ns,I(t.activeText),1)):U("",!0)],2)}var Yt=ce(es,[["render",ss]]),os="/assets/minus.5ab3c386.svg",Xt="/assets/switcher.7fb22669.svg",as="/assets/border.93b1f158.svg",is="/assets/pushpin.9cdf606a.svg";const bt=new Map;let Qe=0;function ls(t){const e=Symbol();return bt.set(e,t),Qe++,[e,Qe]}function rs(t){bt.delete(t)}window.addEventListener("resize",us);function us(){bt.forEach(t=>t.exposed.avoidOutOfBound())}function cs(t){return t===Qe?t:(Qe++,Qe)}const ds={class:"__g-window-bar-title"},hs={width:"16",height:"16",src:os,alt:"min"},fs={width:"16",height:"16",src:Xt,alt:"min"},ps={width:"16",height:"16",src:as,alt:"max"},ms={width:"16",height:"16",src:Xt,alt:"max"},gs=ie({props:{title:{type:String,required:!0},defaultStyle:{type:Object},position:{type:String,default:"fixed"}},setup(t,{expose:e}){const n=t,s=E(),o=E(),r=E(),l=E(),i=E(),a=E(),c=E(),y=E(),m=E(),L=E(),x=E(),z=E(),N=E(),j=E(),V=300,ne=an(),[de,J]=ls(ne);De(()=>{var Y,k,A,$,W,H,K,d,b,S,T,g,P;(Y=s.value)==null||Y.addEventListener("mousedown",F),(k=o.value)==null||k.addEventListener("mousedown",xe),(A=l.value)==null||A.addEventListener("mousedown",_=>_.stopPropagation()),($=i.value)==null||$.addEventListener("mousedown",_=>_.stopPropagation()),(W=a.value)==null||W.addEventListener("mousedown",_=>_.stopPropagation()),(H=c.value)==null||H.addEventListener("mousedown",_=>pe(_,"n")),(K=y.value)==null||K.addEventListener("mousedown",_=>pe(_,"s")),(d=m.value)==null||d.addEventListener("mousedown",_=>pe(_,"e")),(b=L.value)==null||b.addEventListener("mousedown",_=>pe(_,"w")),(S=x.value)==null||S.addEventListener("mousedown",_=>pe(_,"ne")),(T=z.value)==null||T.addEventListener("mousedown",_=>pe(_,"nw")),(g=N.value)==null||g.addEventListener("mousedown",_=>pe(_,"se")),(P=j.value)==null||P.addEventListener("mousedown",_=>pe(_,"sw"))}),Ye(()=>{rs(de)});const p=on({pinned:!0,minimized:!1,maximized:!1,left:"",top:"",width:"",height:"",zIndex:J}),M={left:0,top:0,width:0,height:0,inited:!1},C={clickX:0,clickY:0,direction:""};function F(){p.pinned||(p.zIndex=cs(p.zIndex))}function se(){p.minimized=!p.minimized,p.maximized&&(p.maximized=!1),F()}function Oe(){p.maximized=!p.maximized,p.minimized&&(p.minimized=!1),p.maximized||Se(),F()}function _e(){let Y=!p.pinned;if(!Y){if(!M.inited){let k=s.value.offsetLeft,A=s.value.offsetTop;if(n.position==="fixed"){let $=s.value.offsetParent;for(;$;)k+=$.offsetLeft,A+=$.offsetTop,$=$.offsetParent}M.left=k,M.top=A,M.width=s.value.offsetWidth,M.height=s.value.offsetHeight}p.left=M.left+"px",p.top=M.top+"px",p.width=M.width+"px",p.height=M.height+"px"}p.pinned=Y,be(()=>{Se()}),F()}function Ie(Y){C.clickX=Y.pageX,C.clickY=Y.pageY,M.inited=!0,M.left=s.value.offsetLeft,M.top=s.value.offsetTop,M.width=s.value.offsetWidth,p.minimized||(M.height=s.value.offsetHeight)}function Te(){M.left=s.value.offsetLeft,M.top=s.value.offsetTop,M.width=s.value.offsetWidth,p.minimized||(M.height=s.value.offsetHeight),document.removeEventListener("mousemove",Ce),document.removeEventListener("mousemove",ze),document.removeEventListener("mouseup",Te)}function xe(Y){p.pinned||p.maximized||(Ie(Y),document.addEventListener("mousemove",Ce),document.addEventListener("mouseup",Te))}function Ce(Y){const[k,A]=[Y.pageX-C.clickX,Y.pageY-C.clickY];p.left=(M.left+k<0?0:M.left+k)+"px",p.top=(M.top+A<0?0:M.top+A)+"px"}function pe(Y,k){p.pinned||(Y.preventDefault(),Ie(Y),C.direction=k,document.addEventListener("mousemove",ze),document.addEventListener("mouseup",Te))}function ze(Y){if(C.direction==="")return;const[k,A]=[Y.pageX-C.clickX,Y.pageY-C.clickY],$=()=>{M.height-A<V||(p.height=M.height-A+"px",p.top=M.top+A+"px")},W=()=>{M.height+A<V||(p.height=M.height+A+"px")},H=()=>{M.width-k<V||(p.width=M.width-k+"px",p.left=M.left+k+"px")},K=()=>{M.width+k<V||(p.width=M.width+k+"px")};C.direction==="e"?K():C.direction==="ne"?($(),K()):C.direction==="nw"?($(),H()):C.direction==="n"?$():C.direction==="se"?(W(),K()):C.direction==="sw"?(W(),H()):C.direction==="s"?W():C.direction==="w"&&H()}function Se(){p.pinned||p.maximized||n.position==="absolute"||(M.top>=window.innerHeight-200&&(M.top=window.innerHeight-200),M.left>=window.innerHeight-200&&(M.left=window.innerHeight-200),p.top=M.top+"px",p.left=M.left+"px")}return e({avoidOutOfBound:Se}),(Y,k)=>(h(),f("div",{class:"__g-window",ref_key:"windowRef",ref:s,style:Re(w(p).maximized?{top:0,bottom:0,left:0,right:0,position:"fixed",zIndex:w(p).zIndex}:w(p).pinned?w(p).minimized?ht(dt({},t.defaultStyle),{height:"28px"}):t.defaultStyle:{width:w(p).width,height:w(p).minimized?"28px":w(p).height,top:w(p).top,left:w(p).left,position:t.position,zIndex:w(p).zIndex,boxShadow:"0 0 8px gray"})},[u("div",{class:"__g-window-bar",ref_key:"barRef",ref:o},[u("span",ds,I(t.title),1),u("span",{class:"__g-window-bar-button",ref_key:"minimizeBtn",ref:l,onClick:k[0]||(k[0]=A=>se())},[Z(u("img",hs,null,512),[[ae,!w(p).minimized]]),Z(u("img",fs,null,512),[[ae,w(p).minimized]])],512),u("span",{class:"__g-window-bar-button",ref_key:"maximizeBtn",ref:i,onClick:k[1]||(k[1]=A=>Oe())},[Z(u("img",ps,null,512),[[ae,!w(p).maximized]]),Z(u("img",ms,null,512),[[ae,w(p).maximized]])],512),u("span",{class:"__g-window-bar-button",ref_key:"pinBtn",ref:a,onClick:k[2]||(k[2]=A=>_e())},[Z(u("img",{width:"16",height:"16",src:is,alt:"pin",style:Re(w(p).pinned?{}:{transform:"rotate(-45deg)"})},null,4),[[ae,!w(p).maximized]])],512)],512),u("div",{class:"__g-window-inner",ref_key:"innerRef",ref:r},[Vt(Y.$slots,"default")],512),Z(u("div",{class:"__g-window-resize-area-n",ref_key:"resizeAreaN",ref:c},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-s",ref_key:"resizeAreaS",ref:y},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-e",ref_key:"resizeAreaE",ref:m,style:Re(w(p).minimized?{top:0,bottom:0}:{})},null,4),[[ae,!w(p).pinned&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-w",ref_key:"resizeAreaW",ref:L,style:Re(w(p).minimized?{top:0,bottom:0}:{})},null,4),[[ae,!w(p).pinned&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-ne",ref_key:"resizeAreaNE",ref:x},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-nw",ref_key:"resizeAreaNW",ref:z},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-se",ref_key:"resizeAreaSE",ref:N},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]]),Z(u("div",{class:"__g-window-resize-area-sw",ref_key:"resizeAreaSW",ref:j},null,512),[[ae,!w(p).pinned&&!w(p).minimized&&!w(p).maximized]])],4))}});const _s={class:"__g-loading-mask"},vs={class:"__g-loading"},ys=u("svg",{class:"__g-loading-svg"},[u("circle",{class:"__g-loading-circle",cx:"22",cy:"22",r:"20"})],-1),ws={class:"__g-loading-text"},Ss={key:1},qt=ie({props:{text:null},setup(t){return(e,n)=>(h(),f("div",_s,[u("div",vs,[ys,u("div",ws,[Array.isArray(t.text)?(h(!0),f(D,{key:0},Q(t.text,s=>(h(),f("div",null,I(s),1))),256)):(h(),f("div",Ss,I(t.text),1))])])]))}});const Ls={rule:{type:Object,required:!0},index:{type:Number}},ks=ie({props:Ls,setup(t,e){}}),bs=t=>(Ae("data-v-4f52f305"),t=t(),$e(),t),Ts={class:"rule-line"},Es={key:0,class:"rule-index"},Rs={class:"rule-item"},As={class:"rule-symbol non-terminal"},$s=bs(()=>u("span",{class:"rule-symbol rule-arrow"},"\u2192",-1));function Is(t,e,n,s,o,r){var l;return h(),f("div",Ts,[t.index!==void 0?(h(),f("span",Es,"("+I(t.index)+")",1)):U("",!0),u("div",Rs,[u("span",As,I(t.rule.origin.name),1),$s,(h(!0),f(D,null,Q((l=t.rule)==null?void 0:l.expansion,i=>(h(),f("span",{class:q(["rule-symbol",i.isTerm?"terminal":"non-terminal"])},I(i.name),3))),256))])])}var jt=ce(ks,[["render",Is],["__scopeId","data-v-4f52f305"]]);const Ot=[["#f1f3ef","#a81e32"],["#fdf2f7","#e77671"],["#acbeac","#e94829"],["#fcf6e8","#e6653a"],["#f0ecea","#d05667"],["#fef5f5","#962832"],["#f4f8e9","#e31b13"],["#f2f4fa","#22406a"],["#a1d4bd","#382c77"],["#ccccb8","#004ea2"],["#e6efc3","#137fa0"],["#fdece9","#a1d4bd"],["#f2f0eb","#758e61"],["#faf8d0","#62be9d"],["#faf6b7","#47b897"],["#eff8fe","#a8cd34"],["#fcefe8","#21a675"],["#ffed95","#c36625"],["#fdf8f0","#eab946"],["#f5fbfe","#4e606c"],["#bacac6","#3f545b"],["#c8d0d2","#655756"],["#f9f9fb","#382f41"],["#dedcdf","#370708"],["#dae5f5","#874154"],["#efc5b4","#564163"],["#eef0f1","#c1a1ca"],["#fff8d9","#5c1028"],["#fce1d6","#aaa1ce"]],Ps=["#f5f5f5","#d3d3d3"],zt=new Map;let Nt=0;function xs(t){let e=zt.get(t.type);return e!==void 0||(e=Ot[Nt%Ot.length],Nt++,zt.set(t.type,e)),e}const Cs={tokenLine:{type:Array,required:!0,default:[]},lineNo:{type:Number,required:!0},wrap:{type:Boolean,default:!1},tokenContent:{type:Boolean,default:!0}},Ms=ie({props:Cs,setup(t,e){const n=E([]);return t.tokenLine.forEach(s=>{let o=xs(s),r={token:s,active:!0,color:o};n.value.push(r)}),{tagList:n,inactiveColor:Ps}}}),Kt=t=>(Ae("data-v-abc11f12"),t=t(),$e(),t),Os={class:"token-line-no"},zs=Kt(()=>u("span",null,"(",-1)),Ns={class:"non-terminal"},Ds=Kt(()=>u("span",null,")",-1));function Bs(t,e,n,s,o,r){return h(),f("div",{class:q(["token-line",[t.wrap?"token-line-wrap":""]])},[u("span",Os,I(t.lineNo),1),u("div",{class:q(["token-line-item",[t.wrap?"token-line-item-wrap":""]])},[(h(!0),f(D,null,Q(t.tagList,l=>(h(),f("div",{class:"token-tag",style:Re(l.active?{backgroundColor:l.color[0],color:l.color[1],borderColor:l.color[1]}:{backgroundColor:t.inactiveColor[0],color:t.inactiveColor[1],borderColor:t.inactiveColor[1]})},[u("span",{class:q(l.token.symbol.isTerm?"terminal":"non-terminal")},I(l.token.symbol.name),3),t.tokenContent&&l.token.symbol.name!==l.token.value?(h(),f(D,{key:0},[zs,u("span",Ns,I(l.token.value),1),Ds],64)):U("",!0)],4))),256))],2)],2)}var Gs=ce(Ms,[["render",Bs],["__scopeId","data-v-abc11f12"]]);const ot={};let Hs=0;const le={async publish(t,e,...n){console.log("PUBLISH: "+t+"/"+e);const s=ot[t];if(!s)return;const o=s[e];if(!o)return;let r=[];for(let l in o)r.push(o[l](...n));return Promise.all(r)},subscribe(t,e,n){ot[t]||(ot[t]={});const s=ot[t];s[e]||(s[e]={});const o=s[e],r=Hs++;o[r]=n;function l(){delete o[r],Object.keys(o).length===0&&delete s[e]}return l}};const Fs=ie({components:{GRadioButtonGroup:Pn,GButton:Ee,GTextarea:Dn,GArrow:Vn,GSwitch:Yt,RuleLine:jt,TokenLine:Gs},setup(){const{t}=Je({useScope:"global"}),e=ln(),n=rn(),s=et(),o=E(""),r=E(""),l=["LR0","LR1","LR1_LALR1"],i=E("LR0"),a=E(!0),c=E([]),y=E([]),m=E(!1);un(i,J=>{s.algorithm=J,e.replace({query:{a:s.algorithm}})}),l.includes(n.query.a)&&(i.value=n.query.a);function L(){Tn(i.value,o.value,r.value,a.value);const J=nt();m.value=!0,c.value=J.store.rules,y.value=J.store.tokens,z(),s.showControlPanel=!0,s.showAutomaton=!0,be(()=>{var p;(p=document.getElementById("automaton"))==null||p.scrollIntoView({behavior:"smooth"})})}const x=E([]);function z(){let J=1,p=[];y.value.forEach(M=>{M.line>J&&(x.value.push(p),p=[],J++),p.push(M)}),p.length>0&&x.value.push(p)}const N=E(!1);function j(){N.value=!N.value}const V=E(!0);function ne(){o.value="",r.value="",c.value=[],y.value=[],x.value=[],m.value=!1,s.$reset(),s.algorithm=i.value}const de=[le.subscribe("lr","Reset",ne)];return Ye(()=>de.forEach(J=>J())),{t,parse:L,replaceTerminalName:a,grammar:o,text:r,algos:l,algorithm:i,ruleList:c,tokenLineList:x,started:m,tokenLineWrap:N,changeTokenLineWrap:j,showTokenContent:V}}}),Us=t=>(Ae("data-v-1d4e5c0d"),t=t(),$e(),t),Vs={class:"panel-container"},Ws={class:"control-panel"},Ys=["href"],Xs=Us(()=>u("i",{class:"bi bi-question-circle",style:{color:"gray","font-size":"12px","margin-left":"4px"}},null,-1)),qs=[Xs],js={key:0,class:"input-panel"},Ks={class:"grammar-input panel-item"},Zs={class:"text-input panel-item"},Qs={key:1,class:"token-rule-panel"},Js={class:"rule-panel panel-item"},eo={class:"token-panel panel-item"},to={class:"token-line-check"};function no(t,e,n,s,o,r){const l=he("GRadioButtonGroup"),i=he("GSwitch"),a=he("GButton"),c=he("GTextarea"),y=he("RuleLine"),m=he("TokenLine");return h(),f("div",Vs,[u("div",Ws,[t.started?U("",!0):(h(),f(D,{key:0},[te(l,{modelValue:t.algorithm,"onUpdate:modelValue":e[0]||(e[0]=L=>t.algorithm=L),options:t.algos},null,8,["modelValue","options"]),u("div",null,[te(i,{modelValue:t.replaceTerminalName,"onUpdate:modelValue":e[1]||(e[1]=L=>t.replaceTerminalName=L),"active-text":t.t("LR.InputPanel.NameCharacter"),"inactive-text":t.t("LR.InputPanel.KeepCharacter")},null,8,["modelValue","active-text","inactive-text"]),u("a",{href:t.t("GuideURLs.NameCharacter"),target:"_blank"},qs,8,Ys)]),te(a,{onClick:e[2]||(e[2]=L=>t.parse()),type:"success"},{default:ge(()=>[we(I(t.t("LR.InputPanel.ParseButton")),1)]),_:1})],64))]),t.started?U("",!0):(h(),f("div",js,[u("div",Ks,[te(c,{class:"input-textarea",resize:"none",modelValue:t.grammar,"onUpdate:modelValue":e[3]||(e[3]=L=>t.grammar=L),placeholder:t.t("LR.InputPanel.GrammarPlaceholder")},null,8,["modelValue","placeholder"])]),u("div",Zs,[te(c,{class:"input-textarea",resize:"none",modelValue:t.text,"onUpdate:modelValue":e[4]||(e[4]=L=>t.text=L),placeholder:t.t("LR.InputPanel.TextPlaceholder")},null,8,["modelValue","placeholder"])])])),t.started?(h(),f("div",Qs,[u("div",Js,[(h(!0),f(D,null,Q(t.ruleList,(L,x)=>(h(),ye(y,{class:"rule-line",rule:L,index:x},null,8,["rule","index"]))),256))]),u("div",eo,[u("div",to,[Z(u("input",{type:"checkbox","onUpdate:modelValue":e[5]||(e[5]=L=>t.tokenLineWrap=L)},null,512),[[It,t.tokenLineWrap]]),u("label",null,I(t.t("LR.InputPanel.WordWrap")),1),Z(u("input",{type:"checkbox","onUpdate:modelValue":e[6]||(e[6]=L=>t.showTokenContent=L)},null,512),[[It,t.showTokenContent]]),u("label",null,I(t.t("LR.InputPanel.TokenContent")),1)]),u("div",{class:q(["token-line-container",[t.tokenLineWrap?"token-line-container-wrap":""]])},[(h(!0),f(D,null,Q(t.tokenLineList,(L,x)=>(h(),ye(m,{class:"token-line","token-line":L,lineNo:x+1,wrap:t.tokenLineWrap,"token-content":t.showTokenContent},null,8,["token-line","lineNo","wrap","token-content"]))),256))],2)])])):U("",!0)])}var so=ce(Fs,[["render",no],["__scopeId","data-v-1d4e5c0d"]]);const Zt=t=>(Ae("data-v-2c28af46"),t=t(),$e(),t),oo={class:"control-panel"},ao={class:"control-panel-group"},io=Zt(()=>u("span",{class:"non-terminal"},"I",-1)),lo={class:"non-terminal"},ro={class:"control-panel-group"},uo=["href"],co=Zt(()=>u("i",{class:"bi bi-question-circle",style:{color:"gray","font-size":"12px"}},null,-1)),ho=[co],fo={key:2,class:"control-panel-group"},po={key:3},mo=ie({setup(t){const{t:e}=Je({useScope:"global"}),n=et(),s=fe(()=>n.manual);function o(){n.manual=!n.manual}const r=nt(),l=fe(()=>n.currentStateId),i=fe(()=>n.algorithm),a=E(0),c=E(0),y=fe(()=>s.value||!n.stateFlags[l.value].closureDone&&a.value===0),m=fe(()=>{const C=n.stateFlags[l.value];return s.value||C.closureDone&&!C.appended&&a.value===0}),L=fe(()=>!s.value&&a.value===2);async function x(){const C=r.automaton.CalcStateClosure(l.value,i.value);(i.value==="LR1"||i.value==="LR1_LALR1")&&r.automaton.MergeLookaheads(l.value),n.stateFlags[l.value].closureDone=!0,await le.publish("lr","State"+l.value+"Closure",C)}async function z(){const C=r.automaton.AppendStates(l.value);await le.publish("lr","AutomatonAppendStates",C),s.value||(n.stateFlags[l.value].active=!1,N()?n.stateFlags[l.value].active=!0:i.value==="LR0"||i.value==="LR1"?a.value=2:a.value=1)}function N(){let C=l.value+1;for(;;){if(C>=r.automaton.states.length)return!1;let F=r.automaton.states[C];if(F===void 0){++C;continue}if(!(F.closureDone&&F.appended))break;C++}return n.currentStateId=C,!0}async function j(){n.automatonLoading=!0,setTimeout(async()=>{for(;a.value===0;){const C=n.stateFlags[l.value];C.closureDone||await x(),C.appended||await z()}a.value===1&&await V(),n.automatonLoading=!1})}async function V(){const C=r.automaton.mergeLr1();await le.publish("lr","AutomatonMergeLr1States",C),a.value=2}function ne(){r.parseTable.calc(),c.value=1,n.showParseTable=!0,be(()=>{var C;(C=document.getElementById("parsetable"))==null||C.scrollIntoView({behavior:"smooth"})})}function de(){c.value=2,n.showParseTree=!0,be(()=>{var C;(C=document.getElementById("parsetree"))==null||C.scrollIntoView({behavior:"smooth"})})}function J(){const C=r.parseByStep();le.publish("lr","ParseTreeStep",C),le.publish("lr","ParseTableHighlight",C.actionSource),le.publish("lr","AutomatonStatesPath",C),r.done&&(c.value=3)}function p(){for(;!r.done;)J()}function M(){le.publish("lr","Reset")}return(C,F)=>(h(),f("div",oo,[c.value===0?(h(),f(D,{key:0},[a.value===0?(h(),f(D,{key:0},[u("div",ao,[u("div",null,[we(I(w(e)("LR.ControlPanel.CurrentState"))+" ",1),io,u("sub",lo,I(w(l)),1)]),Z(te(w(Ee),{type:"success",onClick:F[0]||(F[0]=se=>x())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.CalcualteClosure")),1)]),_:1},512),[[ae,w(y)]]),Z(te(w(Ee),{type:"success",onClick:F[1]||(F[1]=se=>z())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.AppendStates")),1)]),_:1},512),[[ae,w(m)]]),Z(te(w(Ee),{type:"info",onClick:F[2]||(F[2]=se=>j())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.Skip")),1)]),_:1},512),[[ae,!w(s)]])]),u("div",ro,[u("span",null,[we(I(w(e)("LR.ControlPanel.ManualMode"))+" ",1),u("a",{href:w(e)("GuideURLs.ManualMode"),target:"_blank"},ho,8,uo)]),te(w(Yt),{"model-value":w(s),onChange:o,disabled:w(s)},null,8,["model-value","disabled"])])],64)):U("",!0),a.value===1?(h(),ye(w(Ee),{key:1,type:"info",onClick:F[3]||(F[3]=se=>V())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.MergeLR1")),1)]),_:1})):U("",!0),a.value===2?Z((h(),ye(w(Ee),{key:2,type:"info",onClick:F[4]||(F[4]=se=>ne())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.CalculateParseTable")),1)]),_:1},512)),[[ae,w(L)]]):U("",!0)],64)):U("",!0),c.value===1?(h(),ye(w(Ee),{key:1,type:"info",onClick:F[5]||(F[5]=se=>de())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.StartParse")),1)]),_:1})):U("",!0),c.value===2?(h(),f("div",fo,[te(w(Ee),{type:"success",onClick:F[6]||(F[6]=se=>J())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.ParseStep")),1)]),_:1}),te(w(Ee),{type:"info",onClick:F[7]||(F[7]=se=>p())},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.Skip")),1)]),_:1})])):U("",!0),c.value===3?(h(),f("span",po,I(w(e)("LR.ControlPanel.Finish")),1)):U("",!0),te(w(Ee),{onClick:F[8]||(F[8]=se=>M()),type:"error"},{default:ge(()=>[we(I(w(e)("LR.ControlPanel.Reset")),1)]),_:1})]))}});var go=ce(mo,[["__scopeId","data-v-2c28af46"]]);const _o=ie({props:{lrItem:{type:Object,required:!0}},setup(){}}),Qt=t=>(Ae("data-v-42889209"),t=t(),$e(),t),vo={class:"lr-item"},yo={class:"lr-item-symbol non-terminal"},wo=Qt(()=>u("span",{class:"lr-item-arrow"},"\u2192",-1)),So={key:0,class:"lr-item-dot"},Lo={key:0,class:"lr-item-dot"},ko=Qt(()=>u("span",{class:"lr-item-comma"},",",-1)),bo={class:"lr-item-symbol terminal"},To={key:0,class:"lr-item-lookahead-sep"};function Eo(t,e,n,s,o,r){return h(),f("div",vo,[u("span",yo,I(t.lrItem.rule.origin.name),1),wo,t.lrItem.index===0?(h(),f("span",So,"\u25CF")):U("",!0),(h(!0),f(D,null,Q(t.lrItem.rule.expansion,(l,i)=>(h(),f(D,null,[u("span",{class:q(["lr-item-symbol",l.isTerm?"terminal":"non-terminal"])},I(l.name),3),i+1===t.lrItem.index?(h(),f("span",Lo,"\u25CF")):U("",!0)],64))),256)),t.lrItem.lookahead.size>0?(h(),f(D,{key:1},[ko,(h(!0),f(D,null,Q(t.lrItem.lookahead,(l,i)=>(h(),f(D,null,[u("span",bo,I(l.name),1),i!==t.lrItem.lookahead.size-1?(h(),f("span",To,"/")):U("",!0)],64))),256))],64)):U("",!0)])}var Ro=ce(_o,[["render",Eo],["__scopeId","data-v-42889209"]]);const Ao=ie({props:{state:{type:Object,required:!0},stateItemData:{type:Object,required:!0}},emits:["updateState"],components:{LrItemComponent:Ro},setup(t,e){const n=et();n.stateFlags[t.state.id].closureDone=t.state.closureDone,n.stateFlags[t.state.id].appended=t.state.appended;const s=E(),o=E([]),r=E([]),l=fe(()=>n.stateFlags[t.state.id].active),i=fe(()=>n.stateFlags[t.state.id].appended),a=E(-1);t.state.kernel.forEach(V=>{o.value.push(V)});function c(V,ne=!0){a.value++,V.forEach(de=>{r.value.push(de)}),V.length!==0&&ne&&e.emit("updateState",t.state.id)}const y=E(0);function m(V){o.value=[...V.kernel],r.value=[...V.closure],r.value.splice(0,o.value.length),y.value++}function L(V){o.value=[...V.kernel],r.value=[...V.closure],r.value.splice(0,o.value.length),be(()=>{e.emit("updateState",t.state.id,!0)})}const x=E(0),z=E([]);async function N(V){var ne;z.value.push(V),x.value++,(ne=s.value)==null||ne.classList.add("state-merged"),await be(),e.emit("updateState",t.state.id,!1)}const j=[le.subscribe("lr","State"+t.state.id+"ClosureStep",c),le.subscribe("lr","State"+t.state.id+"MergeLookaheads",m),le.subscribe("lr","State"+t.state.id+"Closure",L),le.subscribe("lr","State"+t.state.id+"MergeLr1",N)];return Ye(()=>{j.forEach(V=>V())}),{stateContainerRef:s,kernel:o,closureExceptKernel:r,currentItem:a,active:l,done:i,updateClosureKey:y,updateStateKey:x,mergeFromList:z}}}),Xe=t=>(Ae("data-v-9038d6ec"),t=t(),$e(),t),$o={class:"state-id"},Io=Xe(()=>u("span",{class:"non-terminal"},"I",-1)),Po={class:"terminal"},xo=Xe(()=>u("span",null,"\xA0(",-1)),Co=Xe(()=>u("span",{class:"non-terminal"},"I",-1)),Mo={class:"terminal"},Oo={key:0},zo=Xe(()=>u("span",null,")",-1)),No={key:0,class:"state-accept"},Do=Xe(()=>u("svg",{class:"accept-svg",width:"10",height:"15"},[u("polyline",{class:"accept-arrow",points:"5,0 5,12 0,7 5,12 10,7"})],-1)),Bo=Xe(()=>u("div",{class:"terminal",style:{"line-height":"12px"}},"accept",-1)),Go=[Do,Bo];function Ho(t,e,n,s,o,r){const l=he("LrItemComponent");return h(),f("div",{class:q(["state-container",[t.active?"state-active":"",t.done?"state-done":"",t.stateItemData.highlight==="normal"?"":"state-highlight-"+t.stateItemData.highlight]]),ref:"stateContainerRef"},[u("div",$o,[Io,u("sub",Po,I(t.state.id),1),t.mergeFromList.length!==0?(h(),f(D,{key:0},[xo,(h(!0),f(D,null,Q(t.mergeFromList,(i,a)=>(h(),f(D,null,[Co,u("sub",Mo,I(i),1),a!==t.mergeFromList.length-1?(h(),f("span",Oo,",")):U("",!0)],64))),256)),zo],64)):U("",!0)]),(h(),f("div",{class:"state-kernel",key:t.updateStateKey},[(h(!0),f(D,null,Q(t.kernel,(i,a)=>(h(),ye(l,{class:q([!t.done&&a===t.currentItem?"lr-item-calcualting":"","lr-item"]),"lr-item":i},null,8,["class","lr-item"]))),256))])),(h(),f("div",{class:"state-closure",key:t.updateClosureKey+t.updateStateKey},[(h(!0),f(D,null,Q(t.closureExceptKernel,(i,a)=>(h(),ye(l,{class:q([!t.done&&a===t.currentItem-t.kernel.length?"lr-item-calcualting":"","lr-item"]),"lr-item":i},null,8,["class","lr-item"]))),256))])),t.state.end?(h(),f("div",No,Go)):U("",!0)],2)}var Fo=ce(Ao,[["render",Ho],["__scopeId","data-v-9038d6ec"]]);const _t=16,vt=8,yt=16,je=8,ke=12,ue=48,Ke=32,Uo=4,wt=ke/2;function Dt(t,e,n,s){return{state:t,top:e,left:n,column:s,linesIn:[],linesToLeft:[],linesToRight:[],linesToSameColumn:[],linesToSelf:[],hidden:!1,merged:!1,highlight:"normal"}}function Bt(t){return{stateIds:t===void 0?[]:t,left:0,height:ue,width:ue,linesPassByRight:[],linesPassByLeft:[],linesPassByBottom:[]}}let Gt=-1;function Ze(t,e,n,s){return++Gt,{id:Gt,symbol:t,from:e,to:n,type:s,points:[[0,0]],hidden:!1,highlight:"normal"}}const Vo=ie({components:{StateItem:Fo,GLoading:qt},setup(){const{t}=Je({useScope:"global"}),e=et(),n=nt(),s=fe(()=>e.automatonLoading),o=new Map,r=E(0),l=E(0),i=E(new Map),a=E(new Map),c=[];function y(d){e.stateFlags[d]={active:!1,closureDone:!1,appended:!1}}function m(){const d=n.automaton.states[0];i.value.set(d.id,Dt(d,0,0,0)),c.push(Bt([d.id])),be(()=>{const b=o.get(0);c[0].width=b.offsetWidth,c[0].height=b.offsetHeight})}m();async function L(d,b){let S=i.value.get(d).column,T=c[S],g=0;for(;g<T.stateIds.length&&T.stateIds[g]!==d;g++);let P=o.get(d),_=P.offsetTop+P.offsetHeight;for(g+=1;g<T.stateIds.length;g++){let B=o.get(T.stateIds[g]),oe=i.value.get(T.stateIds[g]);oe.top=_+Ke,_+=Ke+B.offsetHeight}T.width=Math.max(T.width,P.offsetWidth),T.height=_,r.value=Math.max(r.value,T.height+ue+ke*T.linesPassByBottom.length),l.value=Math.max(l.value,T.left+T.width+ue+ke*T.linesPassByRight.length),b&&await z(S+1)}async function x(d){e.stateFlags[d.from].appended=!0;let b=i.value.get(d.from).column,S=c[b],T=b+1,g=c[T];g===void 0&&(g=Bt(),c.push(g));let P=[],_=[],B=[],oe=[],ve=T;d.targets.forEach(O=>{if(i.value.has(O.state.id)){let G=i.value.get(O.state.id).column;ve=Math.min(ve,G),G<b?P.push(O):G>b?_.push(O):O.state.id===d.from?oe.push(O):B.push(O)}else y(O.state.id),i.value.set(O.state.id,Dt(O.state,0,0,T)),g.stateIds.push(O.state.id),_.push(O)});let re=[];for(let O=0;O<_.length;O++){let G=Ze(_[O].symbol,d.from,_[O].state.id,"Right");a.value.set(G.id,G),i.value.get(G.from).linesToRight.push(G.id),i.value.get(G.to).linesIn.push(G.id),re.push(G.id)}S.linesPassByRight.push(...re.reverse());for(let O=0;O<P.length;O++){let G=Ze(P[O].symbol,d.from,P[O].state.id,"Left");a.value.set(G.id,G);let qe=i.value.get(G.from),Ne=i.value.get(G.to);qe.linesToLeft.push(G.id),Ne.linesIn.push(G.id),S.linesPassByRight.push(G.id);for(let ut=qe.column;ut>=Ne.column;ut--)c[ut].linesPassByBottom.push(G.id);c[Ne.column].linesPassByLeft.push(G.id)}re=[];for(let O=0;O<B.length;O++){let G=Ze(B[O].symbol,d.from,B[O].state.id,"SameColumn");a.value.set(G.id,G),i.value.get(G.from).linesToSameColumn.push(G.id),i.value.get(G.to).linesIn.push(G.id),re.push(G.id)}if(S.linesPassByLeft.push(...re.reverse()),oe.length!==0){let O=Ze(oe[0].symbol,d.from,d.from,"Self");a.value.set(O.id,O),i.value.get(O.from).linesToSelf.push(O.id)}let me=ue*2+ke*Math.max(S.linesPassByRight.length,g.linesPassByLeft.length),Le=-Ke;g.left=S.left+S.width+me;for(let O=0;O<g.stateIds.length;O++){let G=g.stateIds[O],qe=i.value.get(G);qe.left=g.left,qe.top=Le+Ke,await be();let Ne=o.get(G);Le=Ne.offsetTop+Ne.offsetHeight,g.width=Math.max(g.width,Ne.offsetWidth)}r.value=Math.max(r.value,Le),l.value=Math.max(l.value,g.left+g.width),g.height=Le,await z(ve)}async function z(d){for(let T=d;T<c.length;T++){let g=ue*2+ke*Math.max(c[T-1].linesPassByRight.length,c[T].linesPassByLeft.length),P=c[T-1].left+c[T-1].width+g,_=P-c[T].left;_!==0&&(c[T].left+=_,c[T].stateIds.forEach(B=>{i.value.get(B).left=P}))}await be();const b=c[c.length-1];l.value=Math.max(l.value,b.left+b.width+ue+ke*b.linesPassByRight.length);const S=[];return a.value.forEach((T,g)=>S.push(N(g))),Promise.all(S)}async function N(d){let b=a.value.get(d),S=i.value.get(b.from),T=i.value.get(b.to),g=o.get(b.from),P=o.get(b.to),_=[];if(b.type==="Right"){let B=g.offsetLeft+g.offsetWidth,oe=g.offsetTop+yt+_t*S.linesToRight.indexOf(d),ve=P.offsetLeft,re=P.offsetTop+je+vt*T.linesIn.indexOf(d),me=c[S.column].left+c[S.column].width+ue+ke*c[S.column].linesPassByRight.indexOf(d);l.value=Math.max(l.value,me+ue),_.push([B,oe]),_.push([me,oe]),_.push([me,re]),_.push([ve,re])}else if(b.type==="Left"){let B=g.offsetLeft+g.offsetWidth,oe=g.offsetTop+g.offsetHeight-yt-_t*S.linesToLeft.indexOf(d),ve=P.offsetLeft,re=P.offsetTop+je+vt*T.linesIn.indexOf(d),me=c[S.column].left+c[S.column].width+ue+ke*c[S.column].linesPassByRight.indexOf(d),Le=ve-ue-wt-ke*c[T.column].linesPassByLeft.indexOf(d),O=0;for(let G=S.column;G>=T.column;G--)O=Math.max(O,c[G].height+ue+ke*c[G].linesPassByBottom.indexOf(d));l.value=Math.max(l.value,me+ue),r.value=Math.max(r.value,O+ue),_.push([B,oe]),_.push([me,oe]),_.push([me,O]),_.push([Le,O]),_.push([Le,re]),_.push([ve,re])}else if(b.type==="SameColumn"){let B=g.offsetLeft,oe=g.offsetTop+g.offsetHeight-je-_t*(S.linesToSameColumn.indexOf(d)+1),ve=B,re=P.offsetTop+je+vt*T.linesIn.indexOf(d),me=B-ue-wt-ke*c[S.column].linesPassByLeft.indexOf(d);_.push([B,oe]),_.push([me,oe]),_.push([me,re]),_.push([ve,re])}else{let B=g.offsetLeft,oe=g.offsetTop+g.offsetHeight-je,ve=g.offsetLeft+yt,re=g.offsetTop+g.offsetHeight,me=B-ue+wt,Le=re+Ke/2;r.value=Math.max(r.value,Le+ue),_.push([B,oe]),_.push([me,oe]),_.push([me,Le]),_.push([ve,Le]),_.push([ve,re])}return b.points=_,be()}function j(d){const b=a.value.get(d),S=i.value.get(b.from),T=i.value.get(b.to),g=c[S.column],P=c[T.column];if(b.type==="Left"){g.linesPassByRight.splice(g.linesPassByRight.indexOf(d),1),P.linesPassByLeft.splice(P.linesPassByLeft.indexOf(d),1);for(let _=T.column;_<=S.column;_++){const B=c[_];B.linesPassByBottom.splice(B.linesPassByBottom.indexOf(d),1)}S.linesToLeft.splice(S.linesToLeft.indexOf(d),1),T.linesIn.splice(T.linesIn.indexOf(d),1)}else b.type==="Right"?(g.linesPassByRight.splice(g.linesPassByRight.indexOf(d),1),S.linesToRight.splice(S.linesToRight.indexOf(d),1),T.linesIn.splice(T.linesIn.indexOf(d),1)):b.type==="SameColumn"?(g.linesPassByLeft.splice(g.linesPassByLeft.indexOf(d),1),S.linesToSameColumn.splice(S.linesToSameColumn.indexOf(d),1),T.linesIn.splice(T.linesIn.indexOf(d),1)):S.linesToSelf.splice(S.linesToSelf.indexOf(d),1);a.value.delete(d)}async function V(d){d.mergeMap.forEach((S,T)=>{const g=i.value.get(T),P=function(_){for(;_.length>0;)j(_[_.length-1])};P(g.linesIn),P(g.linesToLeft),P(g.linesToRight),P(g.linesToSameColumn),P(g.linesToSelf),g.merged=!0}),d.transitionChanges.forEach((S,T)=>{S.forEach(g=>{let P=i.value.get(T),_=i.value.get(g.to);const B=Ze(g.symbol,T,g.to,P.column===_.column?"SameColumn":P.column<_.column?"Right":"Left");if(a.value.set(B.id,B),B.type==="Left"){P.linesToLeft.push(B.id),_.linesIn.push(B.id),c[P.column].linesPassByRight.push(B.id),c[_.column].linesPassByLeft.push(B.id);for(let oe=_.column;oe<=P.column;oe++)c[oe].linesPassByBottom.push(B.id)}else B.type==="Right"?(P.linesToRight.push(B.id),_.linesIn.push(B.id),c[P.column].linesPassByRight.push(B.id)):(P.linesToSameColumn.push(B.id),_.linesIn.push(B.id),c[P.column].linesPassByLeft.push(B.id))})});const b=[];d.mergeMap.forEach((S,T)=>{b.push(le.publish("lr","State"+S+"MergeLr1",T))}),await Promise.all(b),await z(1)}const ne=[],de=[];function J(d){if(ne.forEach(b=>{const S=i.value.get(b);S.highlight="normal"}),de.forEach(b=>{const S=a.value.get(b);S.highlight="normal"}),ne.splice(0),de.splice(0),d.action.name==="Shift"||d.action.name==="Goto"){const b=i.value.get(d.actionSource.stateId);b.highlight="green";const S=i.value.get(d.currentStateId);S.highlight="gold",ne.push(d.actionSource.stateId,d.currentStateId);for(let T=0;T<S.linesIn.length;T++){const g=a.value.get(S.linesIn[T]);if(g.from===d.actionSource.stateId){g.highlight="green",de.push(S.linesIn[T]);break}}}else if(d.action.name==="Reduce"){const b=i.value.get(d.currentStateId);b.highlight="gold",ne.push(d.currentStateId);for(let S=d.stateStackDiff.length-1;S>=0;S--){const T=d.stateStackDiff[S],g=i.value.get(T);if(S>0)for(let P=0;P<g.linesIn.length;P++){const _=a.value.get(g.linesIn[P]);if(_.from===d.stateStackDiff[S-1]){_.highlight="brown",de.push(g.linesIn[P]);break}}else for(let P=0;P<g.linesIn.length;P++){const _=a.value.get(g.linesIn[P]);_.from===d.currentStateId&&(_.highlight="brown",de.push(g.linesIn[P]))}g.highlight="brown",ne.push(T)}}else{const b=i.value.get(d.currentStateId);b.highlight="gold",ne.push(d.currentStateId)}}const p=[le.subscribe("lr","AutomatonAppendStates",x),le.subscribe("lr","AutomatonMergeLr1States",V),le.subscribe("lr","AutomatonStatesPath",J)];Ye(()=>{p.forEach(d=>d())});function M(d){if(d.merged)return;i.value.forEach(S=>S.hidden=!0),a.value.forEach(S=>S.hidden=!0),d.hidden=!1;const b=function(S){S.forEach(T=>{let g=a.value.get(T);g.hidden=!1;let P=i.value.get(g.to);P.hidden=!1})};b(d.linesToLeft),b(d.linesToRight),b(d.linesToSameColumn),b(d.linesToSelf)}function C(d){d.merged||(i.value.forEach(b=>b.hidden=!1),a.value.forEach(b=>b.hidden=!1))}function F(d){i.value.forEach((b,S)=>{S===d.from||S===d.to||(b.hidden=!0)}),a.value.forEach((b,S)=>{S!==d.id&&(b.hidden=!0)})}function se(){i.value.forEach(d=>d.hidden=!1),a.value.forEach(d=>d.hidden=!1)}function Oe(d){!e.manual||d.merged||(Object.entries(e.stateFlags).forEach(b=>{Number.parseInt(b[0])===d.state.id?b[1].active=!0:b[1].active=!1}),e.currentStateId=d.state.id)}const _e=E();let Ie=!1,Te=0,xe=0,Ce=0,pe=0;function ze(d){Te=d.pageX,xe=d.pageY,pe=_e.value.scrollLeft,Ce=_e.value.scrollTop,Ie=!0,document.addEventListener("mousemove",Se),document.addEventListener("mouseup",Y)}function Se(d){if(Ie){let b=d.pageX-Te,S=d.pageY-xe;_e.value.scrollLeft=pe-b,_e.value.scrollTop=Ce-S}}function Y(){Ie=!1,pe=_e.value.scrollLeft,Ce=_e.value.scrollTop,document.removeEventListener("mousemove",Se),document.removeEventListener("mouseup",Y)}De(()=>{_e.value.addEventListener("mousedown",ze)});const k=E(!0);function A(){k.value=!k.value}const $=new Map;function W(){const{firstSet:d,nullable:b,SYMBOL_EPSILON:S}=n.getFirstSet();d.forEach((T,g)=>{if(g.isTerm)return;const P=Array.from(T);b.has(g)&&P.push(S),$.set(g,P)})}e.algorithm!=="LR0"&&W();const H=E(100);function K(d){if(d===void 0){H.value=100;return}H.value<=20&&d<0||(H.value+=d)}return{t,automatonLoading:s,stateItems:i,lineBlocks:a,displayPanel:_e,updateState:L,stateRefs:o,GAP_ARROW:Uo,totalHeight:r,totalWidth:l,handleStateMouseEnter:M,handleStateMouseLeave:C,handleLineMouseEnter:F,handleLineMouseLeave:se,handleStateClick:Oe,algorithm:e.algorithm,showFirstSetTable:k,changeShowFirstSetTable:A,firstSetWithNullable:$,zoom:H,adjustZoom:K}}}),Tt=t=>(Ae("data-v-2f4f7d4f"),t=t(),$e(),t),Wo={class:"automaton-display-panel",ref:"displayPanel"},Yo=["onMouseenter","onMouseleave","onClick"],Xo={style:{position:"absolute",top:"0",width:"100%",height:"100%"}},qo=["onMouseenter"],jo=["x","y"],Ko=["points"],Zo={key:0,class:"first-set-panel"},Qo={class:"first-set-header"},Jo={class:"first-set-table"},ea={class:"first-set-row-l non-terminal"},ta={class:"first-set-row-r terminal"},na={class:"first-set-symbol"},sa={class:"zoom-panel"},oa=Tt(()=>u("i",{class:"bi bi-zoom-in"},null,-1)),aa=[oa],ia=Tt(()=>u("i",{class:"bi bi-zoom-out"},null,-1)),la=[ia],ra=Tt(()=>u("i",{class:"bi bi-arrow-clockwise"},null,-1)),ua=[ra];function ca(t,e,n,s,o,r){const l=he("StateItem"),i=he("GLoading");return h(),f(D,null,[u("div",Wo,[u("div",{style:Re({position:"relative",height:t.totalHeight+"px",width:t.totalWidth+"px",transform:"scale("+t.zoom+"%)",transformOrigin:"0px 0px"})},[(h(!0),f(D,null,Q(t.stateItems,a=>(h(),f("div",{key:a[0],ref_for:!0,ref:c=>{t.stateRefs.set(a[1].state.id,c)},style:Re({position:"absolute",top:a[1].top+"px",left:a[1].left+"px"}),class:q([[a[1].hidden?"hidden":"",a[1].merged?"merged":""],"state-item-container"]),onMouseenter:c=>t.handleStateMouseEnter(a[1]),onMouseleave:c=>t.handleStateMouseLeave(a[1]),onClick:c=>t.handleStateClick(a[1])},[te(l,{state:a[1].state,"state-item-data":a[1],onUpdateState:t.updateState},null,8,["state","state-item-data","onUpdateState"])],46,Yo))),128)),(h(),f("svg",Xo,[(h(!0),f(D,null,Q(t.lineBlocks,a=>(h(),f("g",{key:a[0],class:q(a[1].hidden?"hidden":""),onMouseenter:c=>t.handleLineMouseEnter(a[1]),onMouseleave:e[0]||(e[0]=c=>t.handleLineMouseLeave())},[u("text",{class:q([a[1].symbol.isTerm?"terminal":"non-terminal",a[1].type==="SameColumn"||a[1].type==="Self"?"line-text-shift":"","line-text"]),x:a[1].points[0][0],y:a[1].points[0][1]},I(a[1].symbol.name),11,jo),u("polyline",{points:a[1].points.join(" ")+" "+(a[1].type==="Self"?a[1].points[a[1].points.length-1][0]-t.GAP_ARROW+","+(a[1].points[a[1].points.length-1][1]+t.GAP_ARROW)+" "+a[1].points[a[1].points.length-1][0]+","+a[1].points[a[1].points.length-1][1]+" "+(a[1].points[a[1].points.length-1][0]+t.GAP_ARROW)+","+(a[1].points[a[1].points.length-1][1]+t.GAP_ARROW)+" ":a[1].points[a[1].points.length-1][0]-t.GAP_ARROW+","+(a[1].points[a[1].points.length-1][1]-t.GAP_ARROW)+" "+a[1].points[a[1].points.length-1][0]+","+a[1].points[a[1].points.length-1][1]+" "+(a[1].points[a[1].points.length-1][0]-t.GAP_ARROW)+","+(a[1].points[a[1].points.length-1][1]+t.GAP_ARROW)+" "),class:q(["state-goto-line",a[1].highlight==="normal"?"":"state-goto-line-highlight-"+a[1].highlight])},null,10,Ko)],42,qo))),128))]))],4)],512),t.algorithm!=="LR0"?(h(),f("div",Zo,[u("div",Qo,[u("span",null,I(t.t("LR.Automaton.FirstSet")),1),u("span",{class:"first-set-table-btn",onClick:e[1]||(e[1]=(...a)=>t.changeShowFirstSetTable&&t.changeShowFirstSetTable(...a))},I(t.showFirstSetTable?">":"<"),1)]),Z(u("div",Jo,[(h(!0),f(D,null,Q(t.firstSetWithNullable,a=>(h(),f(D,null,[u("div",ea,I(a[0].name),1),u("div",ta,[(h(!0),f(D,null,Q(a[1],c=>(h(),f("span",na,I(c.name),1))),256))])],64))),256))],512),[[ae,t.showFirstSetTable]])])):U("",!0),u("div",sa,[u("span",{onClick:e[2]||(e[2]=a=>t.adjustZoom(10))},aa),u("span",{onClick:e[3]||(e[3]=a=>t.adjustZoom(-10))},la),u("span",{onClick:e[4]||(e[4]=a=>t.adjustZoom())},ua)]),t.automatonLoading?(h(),ye(i,{key:1,text:t.t("LR.Automaton.Calculating")},null,8,["text"])):U("",!0)],64)}var da=ce(Vo,[["render",ca],["__scopeId","data-v-2f4f7d4f"]]);const ha=ie({setup(){const t=E([]),e=E(new Map);let n;const s=nt();s.parseTable.actionTable.forEach((c,y)=>{let m=[];const L=new Map;s.parseTable.actionHeader.forEach(x=>{let z=s.parseTable.actionTable.get(y).get(x),N;z===void 0?N={value:[],highlight:!1}:N={value:z,highlight:!1},m.push(N),L.set(x,N)}),s.parseTable.gotoHeader.forEach(x=>{let z=s.parseTable.gotoTable.get(y).get(x),N;z===void 0?N={value:[],highlight:!1}:N={value:z,highlight:!1},m.push(N),L.set(x,N)}),t.value.push([y,m]),e.value.set(y,L)});const o=s.parseTable.actionHeader.length,r=s.parseTable.gotoHeader.length,l=[...s.parseTable.actionHeader,...s.parseTable.gotoHeader];function i(c){n&&(e.value.get(n.stateId).get(n.symbol).highlight=!1),e.value.get(c.stateId).get(c.symbol).highlight=!0,n=c}const a=[le.subscribe("lr","ParseTableHighlight",i)];return Ye(()=>a.forEach(c=>c())),{actionHeaderCnt:o,gotoHeaderCnt:r,header:l,data:t}}}),fa=t=>(Ae("data-v-c98d5542"),t=t(),$e(),t),pa={class:"parse-table"},ma=fa(()=>u("th",{rowspan:"2"},null,-1)),ga=["colspan"],_a=["colspan"],va={class:"non-terminal"},ya={key:0,class:"terminal"};function wa(t,e,n,s,o,r){return h(),f("table",pa,[u("tr",null,[ma,u("th",{class:"terminal",colspan:t.actionHeaderCnt},"ACTION",8,ga),u("th",{class:"terminal",colspan:t.gotoHeaderCnt},"GOTO",8,_a)]),u("tr",null,[(h(!0),f(D,null,Q(t.header,l=>(h(),f("th",{class:q([l.isTerm?"terminal":"non-terminal"])},I(l.name),3))),256))]),(h(!0),f(D,null,Q(t.data,l=>(h(),f("tr",null,[u("td",null,I(l[0]),1),(h(!0),f(D,null,Q(l[1],i=>(h(),f("td",{class:q([i.highlight?"grid-highlight":""])},[(h(!0),f(D,null,Q(i.value,(a,c)=>(h(),f("span",{class:q([c===0?"parse-action":"parse-action-unused"])},[u("span",va,I(a.abbr),1),a.name!=="Accept"?(h(),f("span",ya,I(a.arg),1)):U("",!0)],2))),256))],2))),256))]))),256))])}var Sa=ce(ha,[["render",wa],["__scopeId","data-v-c98d5542"]]);const Et=ie({props:{mode:{type:String,default:"normal"},color1:{type:String,required:!0},color2:{type:String,required:!0}},setup(){const t=E([]),e=E([]);let n;const s=E(!1);function o(...a){s.value||(n=window.setTimeout(()=>{e.value.splice(0)},500)),s.value=!0,a.forEach(c=>t.value.push([Symbol(),c]))}function r(a){clearTimeout(n),e.value.splice(0),s.value=!1,e.value.push(...t.value.splice(-a,a))}const l=new Map;async function i(a,c){if(c===null){const x=l.get(a);x&&(clearInterval(x[1]),l.delete(a));return}if(l.get(a)!==void 0)return;await be();const m=c.firstElementChild.offsetWidth-c.offsetWidth,L=function(x,z){let N=0;const j=15;return function(){N>=j+(z+1)+j+(z+1)&&(N=0),N<j||(N<j+(z+1)?x.style.transform="translateX(-"+(N-j)+"px)":N<j+(z+1)+j||N<j+(z+1)+j+(z+1)&&(x.style.transform="translateX(-"+(j+(z+1)+j+(z+1)-N-1)+"px)")),N++}};if(m>0){const x=window.setInterval(L(c.firstElementChild,m),80);l.set(a,[c,x])}}return{stackValues:t,desertedValues:e,hideDeserted:s,push:o,pop:r,handleUpdateBlock:i}}}),Ht=()=>{cn(t=>({"70d05909":t.color1,"70d0590a":t.color2}))},Ft=Et.setup;Et.setup=Ft?(t,e)=>(Ht(),Ft(t,e)):Ht;const La=Et,ka=t=>(Ae("data-v-618de97a"),t=t(),$e(),t),ba={class:"parse-stack"},Ta=["title"],Ea=["title","innerHTML"],Ra=["title"],Aa=["title","innerHTML"],$a=ka(()=>u("div",{class:"stack-block stack-block-empty"},null,-1));function Ia(t,e,n,s,o,r){return h(),f("div",ba,[(h(!0),f(D,null,Q(t.stackValues,(l,i)=>(h(),f("div",{key:l[0],class:q(["stack-block",i%2?"stack-block-odd":"stack-block-even"])},[u("div",{class:"stack-block-inner",ref_for:!0,ref:a=>t.handleUpdateBlock(l[0],a)},[t.mode==="normal"?(h(),f("div",{key:0,class:"stack-block-text",title:l[1].title},I(l[1].content),9,Ta)):(h(),f("div",{key:1,class:"stack-block-text",title:l[1].title,innerHTML:l[1].content},null,8,Ea))],512)],2))),128)),(h(!0),f(D,null,Q(t.desertedValues,(l,i)=>(h(),f("div",{key:l[0],class:q(["stack-block","stack-block-deserted",t.hideDeserted?"stack-block-hide":"",i%2?"stack-block-odd":"stack-block-even"])},[t.mode==="normal"?(h(),f("div",{key:0,class:"stack-block-text",title:l[1].title},I(l[1].content),9,Ra)):(h(),f("div",{key:1,class:"stack-block-text",title:l[1].title,innerHTML:l[1].content},null,8,Aa))],2))),128)),$a])}var Ut=ce(La,[["render",Ia],["__scopeId","data-v-618de97a"]]);const Rt=t=>(Ae("data-v-002d3d6a"),t=t(),$e(),t),Pa={class:"parse-message-container"},xa={class:"parse-operations"},Ca={class:"non-terminal"},Ma={class:"parse-current"},Oa={class:"parse-current-text terminal"},za={key:0},Na={class:"parse-current-text non-terminal"},Da={class:"zoom-panel"},Ba=Rt(()=>u("i",{class:"bi bi-zoom-in"},null,-1)),Ga=[Ba],Ha=Rt(()=>u("i",{class:"bi bi-zoom-out"},null,-1)),Fa=[Ha],Ua=Rt(()=>u("i",{class:"bi bi-arrow-clockwise"},null,-1)),Va=[Ua],Wa={class:"parse-stack-container"},Ya={class:"parse-stack-title"},Xa={class:"parse-stack-title"},qa=["width","height"],ja=["d"],Ka=["cx","cy","onClick"],Za=["x","y"],Qa=ie({setup(t){const{t:e}=Je({useScope:"global"}),n=nt(),s=E(n.current),o=E(),r=E(),l=E(),i=60,a=60,c=8,y=20,m=30,L=200,x=E(L),z=E(L);class N{constructor(A,$,W,H){v(this,"id",Symbol());v(this,"children");v(this,"symbol");v(this,"value");v(this,"x");v(this,"y");v(this,"path");v(this,"expand",!0);v(this,"visible",!0);this.symbol=A.symbol,this.value=A.value,this.x=$,this.y=W,this.children=H||[]}shift(A,$){this.y+=A,this.shiftChildren(A,$),this.path!==void 0&&this.drawPath()}shiftChildren(A,$=0){this.children.length===0&&(z.value=Math.max(z.value,$*a+L)),this.children.forEach(W=>W.shift(A,$+1))}drawPath(){if(this.children.length===0)return;this.path===void 0&&(this.path=new j,de.value.push(this.path));const A=this.children.map(K=>K.x),$=this.children[0].y,W=Math.floor((this.y+$)/2);let H=`M ${this.x} ${this.y+c} V ${W}`;for(let K=0;K<A.length;K++)H+=`M ${A[K]} ${W} V ${$-c}`,K!==A.length-1&&(H+=`M ${A[K]} ${W} H ${A[K+1]}`);this.path.pathStr=H}changeExpandShow(A){this.visible=A,(!A||this.expand)&&(this.path&&(this.path.visible=A),this.children.forEach($=>$.changeExpandShow(A)))}changeExpand(){this.children.length!==0&&(this.expand=!this.expand,this.path&&(this.path.visible=this.expand),this.children.forEach(A=>A.changeExpandShow(this.expand)))}}class j{constructor(){v(this,"id",Symbol());v(this,"pathStr","");v(this,"visible",!0)}}const V=E([]),ne=[],de=E([]);let J=m-i;function p(k){let A=J+i;J=A,x.value=J+L;const $=new N(k,A,m);V.value.push($),ne.push($)}function M(k,A){const $=ne.splice(-A,A);let W=0;$.length>0?W=Math.floor(($[0].x+$[$.length-1].x)/2):(W=J+i,J=W);const H=new N(k,W,m,$);V.value.push(H),H.shiftChildren(a),ne.push(H),H.drawPath()}async function C(k){var A,$;if(k.action.name==="Shift"){o.value=k.action,k.stateStackDiff.forEach(H=>{var K;return(K=r.value)==null?void 0:K.push({content:'<span class="non-terminal">I</span><sub class="terminal">'+H.toString()+"</sub>"})}),k.valueStackDiff.forEach(H=>{var K;return(K=l.value)==null?void 0:K.push({title:H.symbol.name,content:'<span class="'+(H.symbol.isTerm?"terminal":"non-terminal")+'">'+H.symbol.name+"</span>"})});const W=k.valueStackDiff[0];p(W)}else k.action.name==="Reduce"?(o.value=k.action,(A=r.value)==null||A.pop(k.stateStackDiff.length),($=l.value)==null||$.pop(k.valueStackDiff.length),M(k.next,k.valueStackDiff.length)):k.action.name==="Goto"?(o.value=k.action,k.stateStackDiff.forEach(W=>{var H;return(H=r.value)==null?void 0:H.push({content:'<span class="non-terminal">I</span><sub class="terminal">'+W.toString()+"</sub>"})}),k.valueStackDiff.forEach(W=>{var H;return(H=l.value)==null?void 0:H.push({title:W.symbol.name,content:'<span class="'+(W.symbol.isTerm?"terminal":"non-terminal")+'">'+W.symbol.name+"</span>"})})):o.value=k.action;s.value=k.next}De(()=>{var k,A;(k=r.value)==null||k.push({content:'<span class="non-terminal">I</span><sub class="terminal">0</sub>'}),(A=l.value)==null||A.push({title:Pe.name,content:'<span class="terminal">'+Pe.name+"</span>"})});const F=[le.subscribe("lr","ParseTreeStep",C)];Ye(()=>{F.forEach(k=>k())});const se=E();let Oe=!1,_e=0,Ie=0,Te=0,xe=0;function Ce(k){k.preventDefault(),_e=k.pageX,Ie=k.pageY,xe=se.value.scrollLeft,Te=se.value.scrollTop,Oe=!0,document.addEventListener("mousemove",pe),document.addEventListener("mouseup",ze)}function pe(k){if(Oe){let A=k.pageX-_e,$=k.pageY-Ie;se.value.scrollLeft=xe-A,se.value.scrollTop=Te-$}}function ze(){Oe=!1,xe=se.value.scrollLeft,Te=se.value.scrollTop,document.removeEventListener("mousemove",pe),document.removeEventListener("mouseup",ze)}De(()=>{se.value.addEventListener("mousedown",Ce)});const Se=E(100);function Y(k){if(k===void 0){Se.value=100;return}Se.value<=20&&k<0||(Se.value+=k)}return(k,A)=>(h(),f(D,null,[u("div",Pa,[u("div",xa,[o.value?(h(),f(D,{key:0},[u("span",null,I(w(e)("LR.ParseTree.Action"))+":\xA0",1),u("span",Ca,I(o.value.abbr),1),Z(u("span",{class:"terminal"},I(o.value.arg),513),[[ae,o.value.name!=="Accept"]]),o.value.name==="Reduce"?(h(),ye(jt,{key:0,style:{"margin-left":"8px"},rule:o.value.rule},null,8,["rule"])):U("",!0)],64)):U("",!0)]),u("div",Ma,[s.value instanceof w(Ue)?(h(),f(D,{key:0},[u("span",null,I(w(e)("LR.ParseTree.NextToken"))+":\xA0",1),u("div",Oa,[u("span",null,I(s.value.type),1),s.value.type!==s.value.value?(h(),f("span",za,"("+I(s.value.value)+")",1)):U("",!0)])],64)):(h(),f(D,{key:1},[u("span",null,I(w(e)("LR.ParseTree.NextSymbol"))+":\xA0",1),u("div",Na,[u("span",null,I(s.value.symbol.name),1)])],64))]),u("div",Da,[u("span",{onClick:A[0]||(A[0]=$=>Y(10))},Ga),u("span",{onClick:A[1]||(A[1]=$=>Y(-10))},Fa),u("span",{onClick:A[2]||(A[2]=$=>Y())},Va)])]),u("div",Wa,[u("div",Ya,I(w(e)("LR.ParseTree.StateStack")),1),te(Ut,{ref_key:"stateStackRef",ref:r,style:{"margin-right":"8px"},mode:"html",color1:"#5976ba",color2:"#b0c4de"},null,512),u("div",Xa,I(w(e)("LR.ParseTree.SymbolStack")),1),te(Ut,{ref_key:"valueStackRef",ref:l,mode:"html",color1:"#68945c",color2:"#6fbe2c"},null,512)]),u("div",{class:"parse-tree",ref_key:"parseTreeRef",ref:se},[(h(),f("svg",{width:x.value,height:z.value,style:Re({transform:"scale("+Se.value+"%)",transformOrigin:"0px 0px"})},[(h(!0),f(D,null,Q(de.value,$=>Z((h(),f("path",{key:$.id,d:$.pathStr,class:"tree-path"},null,8,ja)),[[ae,$.visible]])),128)),(h(!0),f(D,null,Q(V.value,$=>Z((h(),f("g",{key:$.id,class:"tree-node-group"},[u("circle",{cx:$.x,cy:$.y,r:c,class:q(["tree-node-circle",$.expand?"":"tree-node-solid"]),onClick:W=>$.changeExpand()},null,10,Ka),u("text",{class:q(["tree-node-text",$.symbol.isTerm?"terminal":"non-terminal"]),x:$.x,y:$.y+y},I($.symbol.name),11,Za)])),[[ae,$.visible]])),128))],12,qa))],512)],64))}});var Ja=ce(Qa,[["__scopeId","data-v-002d3d6a"]]);const ei=ie({components:{InputPanel:so,ControlPanel:go,Automaton:da,ParseTable:Sa,ParseTree:Ja,GWindow:gs,GLoading:qt},props:{algo:{type:String}},setup(t){const{t:e}=Je({useScope:"global"});dn((m,L,x)=>{if(m instanceof ee)gt({title:e("LR.Exception."+m.message)+(m.extra?m.extra:""),content:e("LR.Exception.ParserErrorExtra"),type:"error"});else if(m instanceof Be)gt({title:e("LR.Exception."+m.message),content:"",type:"info"});else if(m instanceof tt)gt({title:e("LR.Exception."+m.message),content:m.extra?m.extra:"",type:"error"});else return!0;return!1});const n=et(),s=E(!1),o=E("");function r(m){o.value=m}De(async()=>{await bn(r),s.value=!0});const l=fe(()=>n.showControlPanel),i=fe(()=>n.showAutomaton),a=fe(()=>n.showParseTable),c=fe(()=>n.showParseTree),y=fe(()=>n.automatonLoading);return{t:e,larkLoaded:s,loadingMsg:o,showControlPanel:l,showAutomaton:i,showParseTable:a,showParseTree:c,automatonLoading:y}}}),ti={key:1};function ni(t,e,n,s,o,r){const l=he("InputPanel"),i=he("GWindow"),a=he("Automaton"),c=he("ParseTable"),y=he("ParseTree"),m=he("ControlPanel"),L=he("GLoading");return t.larkLoaded?(h(),f(D,{key:0},[te(i,{id:"input",title:t.t("LR.InputPanel.Title"),"default-style":{height:"400px",marginBottom:"4px"},position:"absolute"},{default:ge(()=>[te(l)]),_:1},8,["title"]),t.showAutomaton?(h(),ye(i,{key:0,id:"automaton",title:t.t("LR.Automaton.Title"),"default-style":{height:"80vh",marginBottom:"4px"},position:"absolute"},{default:ge(()=>[te(a)]),_:1},8,["title"])):U("",!0),t.showParseTable?(h(),ye(i,{key:1,id:"parsetable",title:t.t("LR.ParseTable.Title"),"default-style":{width:"fit-content",height:"fit-content",maxWidth:"100%",marginBottom:"4px"},position:"absolute"},{default:ge(()=>[te(c)]),_:1},8,["title"])):U("",!0),t.showParseTree?(h(),ye(i,{key:2,id:"parsetree",title:t.t("LR.ParseTree.Title"),"default-style":{height:"80vh"},position:"absolute"},{default:ge(()=>[te(y)]),_:1},8,["title"])):U("",!0),t.showControlPanel?(h(),ye(m,{key:3})):U("",!0)],64)):(h(),f("div",ti,[te(L,{text:[t.t("LR.LoadingDependecy"),t.t("LR.LoadingDependecyNotice"),t.loadingMsg]},null,8,["text"])]))}var ai=ce(ei,[["render",ni],["__scopeId","data-v-3bd2acb3"]]);export{ai as default};
